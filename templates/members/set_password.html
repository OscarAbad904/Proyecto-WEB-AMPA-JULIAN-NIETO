{% extends "public/layout.html" %}

{% block title %}Establecer contraseña{% endblock %}

{% block content %}
  <section class="private-section">
    <div class="private-container">
      <h1 class="private-title">Establecer contraseña</h1>

      {% if ok %}
        <p class="private-desc">Crea una contraseña para acceder al área de socios.</p>
        <form method="post" class="private-form" novalidate>
          {{ form.hidden_tag() }}
          <div class="private-field">
            {{ form.password.label }}
            {{ form.password(placeholder="Nueva contraseña", autocomplete="new-password") }}
            {% for error in form.password.errors %}
              <p class="form-error">{{ error }}</p>
            {% endfor %}
          </div>
          <div class="private-field">
            {{ form.password_confirm.label }}
            {{ form.password_confirm(placeholder="Repite la contraseña", autocomplete="new-password") }}
            {% for error in form.password_confirm.errors %}
              <p class="form-error">{{ error }}</p>
            {% endfor %}
          </div>
          {{ form.submit(class_="btn-primary") }}
        </form>
      {% else %}
        <p class="private-desc">{{ error or "El enlace no es válido o ha expirado." }}</p>
        <p class="private-desc" style="margin-bottom: 0;">
          Si necesitas un nuevo enlace, contacta con el AMPA.
        </p>
        <p class="private-desc" style="margin-bottom: 0;">
          <a href="{{ url_for('members.login') }}">Volver a login</a>
        </p>
      {% endif %}
    </div>
  </section>
{% endblock %}


version: "3.9"
services:
  web:
    build: .
    ports:
      - "8000:8000"
    depends_on:
      - db
    environment:
      FLASK_ENV: development
      SECRET_KEY: supersecret
      SECURITY_PASSWORD_SALT: saltsalt
      SQLALCHEMY_DATABASE_URI: "mssql+pyodbc://sa:YourStrong!Pass@db:1433/AMPA_JNT?driver=ODBC+Driver+18+for+SQL+Server&TrustServerCertificate=yes"
      MAIL_SERVER: smtp.example.com
      MAIL_PORT: "587"
      MAIL_USE_TLS: "true"
      MAIL_USERNAME: ""
      MAIL_PASSWORD: ""
    volumes:
      - .:/app
  db:
    image: mcr.microsoft.com/mssql/server:2022-latest
    environment:
      SA_PASSWORD: "YourStrong!Pass"
      ACCEPT_EULA: "Y"
    ports:
      - "1433:1433"
